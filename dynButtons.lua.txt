--[[ Lua code. See documentation: https://api.tabletopsimulator.com/ --]]

--[[ The onLoad event is called after the game save finishes loading. --]]
function onLoad()
  local table = getObjectFromGUID('5e4768');
  local size = table.getBoundsNormalized().size;
  local pos = table.getPosition();
  pos.y = pos.y + 1

  zoneSpawn = {position = pos
         , scale = size
         , type = 'ScriptingTrigger'
         , callback = 'zoneCallback'
         , callback_owner = self
         , rotation = table.getRotation() }
  spawnObject(zoneSpawn)

end

function zoneCallback(zone)
  for _,object in ipairs(zone.getObjects()) do
    if object.tag == 'Tile' then
    params = {
        click_function = "click_func",
        function_owner = nil,
        position       = {0, 0, 0},
        width          = 1000,
        height         = 1000,
        font_size      = 340,
        tooltip        = object.getName()
    }
    object.createButton(params)
    end
  end
end
  --zone.destruct() --destroy the zone when you're done with it, to avoid clutter.
function click_func(obj, color, alt_click)
      print(obj.getDescription())

end

--[[ The onUpdate event is called once per frame. --]]
function onUpdate()
    --[[ print('onUpdate loop!') --]]
end
